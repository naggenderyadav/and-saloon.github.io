<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>A & D Unisex Salon - Booking</title>
  <style>
    /* Global */
    body{margin:0;font-family:'Segoe UI',sans-serif;background:#f9f9f9;color:#333;}
    h1,h2,h3{margin:0;font-weight:600;}
    a{text-decoration:none;color:inherit;}

    /* Header / Hero */
    header{
      background:linear-gradient(135deg,#1f3b73,#2c3e50);
      color:#fff;padding:40px 20px;text-align:center;
    }
    header h1{font-size:2.2rem;}
    header p{opacity:0.9;font-size:1rem;}

    /* Container */
    .container{max-width:1000px;margin:auto;padding:20px;}

    /* Card */
    .card{
      background:#fff;padding:25px;margin:20px 0;border-radius:12px;
      box-shadow:0 4px 10px rgba(0,0,0,0.1);
      transition:transform .2s;
    }
    .card:hover{transform:translateY(-3px);}

    /* Form */
    label{display:block;margin:12px 0 6px;font-weight:500;}
    input{
      width:100%;padding:12px;border:1px solid #ccc;
      border-radius:6px;font-size:1rem;
    }
    button{
      margin-top:15px;padding:12px 18px;font-size:1rem;
      background:#d4af37;color:#fff;border:none;border-radius:6px;
      cursor:pointer;transition:background .2s;
    }
    button:hover{background:#b9962d;}

    /* Table */
    table{width:100%;border-collapse:collapse;margin-top:15px;font-size:0.95rem;}
    th,td{border:1px solid #eee;padding:10px;text-align:center;}
    th{background:#2c3e50;color:#fff;}
    tr:nth-child(even){background:#fafafa;}

    select{padding:6px;border-radius:4px;border:1px solid #ccc;}

    /* Message */
    #msg{margin-top:12px;font-weight:bold;}

    /* Footer */
    footer{
      background:#2c3e50;color:#fff;text-align:center;
      padding:15px;margin-top:40px;font-size:0.9rem;
    }
  </style>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <!-- Hero -->
  <header>
    <h1>‚ú® A & D Unisex Salon ‚ú®</h1>
    <p>Experience Luxury Styling with Ankush Padvi & Shakshi Jadhav</p>
    <p>üìû 8329003586 | ‚úâÔ∏è ankushpadvi555@gmail.com</p>
  </header>

  <div class="container">

    <!-- Booking -->
    <div class="card">
      <h2>üìå Book Your Slot</h2>
      <label>Name</label>
      <input id="custName" placeholder="Enter your name"/>
      <label>Contact</label>
      <input id="custPhone" placeholder="Enter your phone"/>
      <p style="margin-top:10px;">Booking Fee: <b>‚Çπ50</b> (adjustable in final bill)</p>
      <a href="upi://pay?pa=9370334319@ybl&pn=A%20%26%20D%20Unisex%20Salon&am=50&cu=INR">
        <button type="button">üí≥ Pay ‚Çπ50 via UPI</button>
      </a>
      <button type="button" onclick="bookSlot()">üìÖ Confirm Booking</button>
      <p id="msg"></p>
    </div>

    <!-- Queue -->
    <div class="card">
      <h2>üìã Today‚Äôs Queue</h2>
      <table>
        <thead>
          <tr>
            <th>Serial</th>
            <th>Date & Time</th>
            <th>Name</th>
            <th>Contact</th>
            <th>Payment</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="queueTable"></tbody>
      </table>
    </div>

  </div>

  <footer>
    ¬© 2025 A & D Unisex Salon | Designed with ‚ù§Ô∏è for our valued clients
  </footer>

<script>
  // ---- Firebase Config ----
  const firebaseConfig = {
    apiKey: "AIzaSyAQJuNHQBu8OHmmz2DPVSSkv9Mj_l3im_g",
    authDomain: "and-unisex-salon.firebaseapp.com",
    databaseURL: "https://and-unisex-salon-default-rtdb.firebaseio.com",
    projectId: "and-unisex-salon",
    storageBucket: "and-unisex-salon.appspot.com",
    messagingSenderId: "369436182781",
    appId: "1:369436182781:web:893b3b8db919b89bb59694",
    measurementId: "G-F9GDHMDZYG"
  };

  // Init
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Generate Serial
  async function getNextSerial(date){
    const snap = await db.ref("bookings/"+date).once("value");
    const count = snap.numChildren();
    return String(count+1).padStart(3,'0');
  }

  // Booking
  async function bookSlot(){
    const name=document.getElementById("custName").value.trim();
    const phone=document.getElementById("custPhone").value.trim();
    const msg=document.getElementById("msg");

    if(!name||!phone){
      msg.innerText="‚ö†Ô∏è Please fill all fields";
      msg.style.color="red";return;
    }

    try{
      const date=new Date();
      const dateStr=date.toISOString().split("T")[0];
      const timeStr=date.toLocaleTimeString();
      const serial=await getNextSerial(dateStr);

      const entry={
        serial:serial,
        datetime:dateStr+" "+timeStr,
        name:name,
        contact:phone,
        paymentStatus:"Pending",
        serviceStatus:"Waiting"
      };
      await db.ref("bookings/"+dateStr+"/"+serial).set(entry);

      msg.innerText="‚úÖ Booking Confirmed! Your Serial: "+serial;
      msg.style.color="green";
      document.getElementById("custName").value="";
      document.getElementById("custPhone").value="";
    }catch(err){
      console.error(err);
      msg.innerText="‚ùå Error: "+err.message;
      msg.style.color="red";
    }
  }

  // Queue
  const today=new Date().toISOString().split("T")[0];
  db.ref("bookings/"+today).on("value",snap=>{
    const data=snap.val()||{};
    const tbody=document.getElementById("queueTable");
    tbody.innerHTML="";
    Object.values(data).sort((a,b)=>a.serial.localeCompare(b.serial)).forEach(item=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`
        <td>${item.serial}</td>
        <td>${item.datetime}</td>
        <td>${item.name}</td>
        <td>${item.contact}</td>
        <td>
          <select onchange="updateField('${today}','${item.serial}','paymentStatus',this.value)">
            <option ${item.paymentStatus=="Pending"?"selected":""}>Pending</option>
            <option ${item.paymentStatus=="Done"?"selected":""}>Done</option>
          </select>
        </td>
        <td>
          <select onchange="updateField('${today}','${item.serial}','serviceStatus',this.value)">
            <option ${item.serviceStatus=="Waiting"?"selected":""}>Waiting</option>
            <option ${item.serviceStatus=="Serving"?"selected":""}>Serving</option>
            <option ${item.serviceStatus=="Done"?"selected":""}>Done</option>
          </select>
        </td>
      `;
      tbody.appendChild(tr);
    });
  });

  // Update field
  function updateField(date,serial,field,val){
    db.ref("bookings/"+date+"/"+serial+"/"+field).set(val);
  }
</script>
</body>
</html>      msg.innerText="‚ùå Error: "+err.message;
      msg.style.color="red";
    }
  }

  // Display Queue
  const today=new Date().toISOString().split("T")[0];
  db.ref("bookings/"+today).on("value",snap=>{
    const data=snap.val()||{};
    const tbody=document.getElementById("queueTable");
    tbody.innerHTML="";
    Object.values(data).sort((a,b)=>a.serial.localeCompare(b.serial)).forEach(item=>{
      const tr=document.createElement("tr");
      tr.innerHTML=`
        <td>${item.serial}</td>
        <td>${item.datetime}</td>
        <td>${item.name}</td>
        <td>${item.contact}</td>
        <td>
          <select onchange="updateField('${today}','${item.serial}','paymentStatus',this.value)">
            <option ${item.paymentStatus=="Pending"?"selected":""}>Pending</option>
            <option ${item.paymentStatus=="Done"?"selected":""}>Done</option>
          </select>
        </td>
        <td>
          <select onchange="updateField('${today}','${item.serial}','serviceStatus',this.value)">
            <option ${item.serviceStatus=="Waiting"?"selected":""}>Waiting</option>
            <option ${item.serviceStatus=="Serving"?"selected":""}>Serving</option>
            <option ${item.serviceStatus=="Done"?"selected":""}>Done</option>
          </select>
        </td>
      `;
      tbody.appendChild(tr);
    });
  });

  // Staff updates field
  function updateField(date,serial,field,val){
    db.ref("bookings/"+date+"/"+serial+"/"+field).set(val);
  }
</script>
</body>
</html>
