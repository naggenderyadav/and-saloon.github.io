<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A & D Unisex Salon - Booking</title>
  <style>
    body{font-family:Arial,sans-serif;background:#f5f5f5;margin:0;}
    header{background:#2c3e50;color:#fff;padding:20px;text-align:center;}
    .container{max-width:900px;margin:auto;padding:20px;}
    .card{background:#fff;padding:20px;margin:15px 0;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.15);}
    label{display:block;margin:10px 0 5px;}
    input{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px;}
    button{margin-top:10px;padding:10px 15px;background:#27ae60;color:#fff;border:none;border-radius:5px;cursor:pointer;}
    button:hover{background:#219150;}
    #msg{margin-top:10px;font-weight:bold;}
    footer{text-align:center;padding:15px;background:#2c3e50;color:white;margin-top:20px;}
  </style>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <header>
    <h1>‚ú® A & D Unisex Salon ‚ú®</h1>
    <p>Experience Luxury Styling with Ankush Padvi & Shakshi Jadhav</p>
    <p>üìû 8329003586 | ‚úâÔ∏è ankushpadvi555@gmail.com</p>
  </header>

  <div class="container">
    <!-- Booking -->
    <div class="card">
      <h2>üìå Book Your Slot</h2>
      <label>Name</label>
      <input id="custName" placeholder="Enter your name"/>
      <label>Contact</label>
      <input id="custPhone" placeholder="Enter your phone"/>
      <p>Booking Fee: ‚Çπ50 (adjustable in final bill)</p>
      <a href="upi://pay?pa=9370334319@ybl&pn=A%20%26%20D%20Unisex%20Salon&am=50&cu=INR">
        <button type="button">üí≥ Pay ‚Çπ50 via UPI</button>
      </a>
      <button type="button" onclick="bookSlot()">‚úÖ Confirm Booking</button>
      <p id="msg"></p>
    </div>
  </div>

  <footer>
    ¬© 2025 A & D Unisex Salon | Designed with ‚ù§Ô∏è for our valued clients
  </footer>

  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyAQJuNHQBu8OHmmz2DPVSSkv9Mj_l3im_g",
      authDomain: "and-unisex-salon.firebaseapp.com",
      databaseURL: "https://and-unisex-salon-default-rtdb.firebaseio.com",
      projectId: "and-unisex-salon",
      storageBucket: "and-unisex-salon.appspot.com",
      messagingSenderId: "369436182781",
      appId: "1:369436182781:web:893b3b8db919b89bb59694",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    async function getNextSerial(date){
      const snap = await db.ref("bookings/"+date).once("value");
      const count = snap.numChildren();
      return String(count+1).padStart(3,'0');
    }

    async function bookSlot(){
      const name=document.getElementById("custName").value.trim();
      const phone=document.getElementById("custPhone").value.trim();
      const msg=document.getElementById("msg");

      if(!name || !phone){
        msg.innerText="‚ö†Ô∏è Please fill all fields";
        msg.style.color="red";
        return;
      }

      try {
        const date=new Date();
        const dateStr=date.toISOString().split("T")[0];
        const timeStr=date.toLocaleTimeString();
        const serial=await getNextSerial(dateStr);

        const entry={
          serial:serial,
          datetime:dateStr+" "+timeStr,
          name:name,
          contact:phone,
          paymentStatus:"Pending",
          serviceStatus:"Waiting"
        };

        await db.ref("bookings/"+dateStr+"/"+serial).set(entry);

        msg.innerText="‚úÖ Booking Done! Your Serial: "+serial;
        msg.style.color="green";

        document.getElementById("custName").value="";
        document.getElementById("custPhone").value="";
      } catch(err){
        msg.innerText="‚ùå Error: "+err.message;
        msg.style.color="red";
        console.error(err);
      }
    }
  </script>
</body>
</html>
